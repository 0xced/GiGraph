# 01. Extensibility through Polymorphism

Date: 2021-09-18

## Context

I assume that most or all users of the package won't need the ability to extend the existing classes through inheritance, yet from the very beginning I always defined classess with polymorphism in mind. Because of that, most methods and properties are marked as virtual, fields are usually protected, not private, and there are extra protected constructors in many cases, that allow providing custom parameters to the base classes. This may cause an impression that the code is not very well thought out.

However, it is really hard and time consuming to decide to what extent to open classes for extension. So the current approach was the simplest. Still, however, trying to provide extensible classes causes the need to write and maintain extra protected constructors, which seem redundant.

## Decision

The following rules apply to keep the code coherent, yet reduce the amount of redundant code.

1. In the context of generators and writers (*GiGraph.Dot.Output.Generators*, *GiGraph.Dot.Output.Writers*), the classes should remain open for any modifications. Even though the package has been developed with the assumption to cover all possible graph elements and attribute types, this approach will leave the door open for customizing the output DOT script.
2. In other contexts, especially *GiGraph.Dot.Entities* and *GiGraph.Dot.Types*, the need for supporting unlimited customizability seems unnecessary. However, because the package has been written with customizability in mind from the very beginning, it would be a waste of time to go through the existing code and refactor each method and property. Therefore, the following rules apply:
   1. **Constructors** are defined **only for the use cases covered by the library**,
      1. if a class defines any **extra constructors** used in chained calls, they should be marked as ***protected***.
   2. **Methods** are **marked as virtual** unless it is unwanted in a specific case,
   3. **Writable properties** are **marked as virtual**,
   4. **Read-only properties** initialized from constructors are **not marked as virtual**,
   5. **Computed properties** are **marked as virtual**,
   6. **Fields** are **protected** unless it is unwanted in specific cases.

## Consequences

1. Slightly less redundant code to maintain.
2. Simplified decision-making process when designing new classes and their extensibility (including constructors).
3. Coherence across the solution.

